<?php
#    echo "Hello";
#    phpinfo(); 

$in = 'И действительно, он пробежал один только несколько шагов. 
Тронулся один, другой солдат, и весь батальон с криком ура! 
побежал вперед и обогнал его. Унтер-офицер батальона, 
подбежав, взял колебавшееся от тяжести в руках князя Андрея знамя, 
но тотчас же был убит. Князь Андрей опять схватил знамя и, 
волоча его за древко, бежал с батальоном. Впереди себя он 
видел наших артиллеристов, из которых одни дрались, 
другие бросали пушки и бежали к нему навстречу; он 
видел и французских пехотных солдат, которые хватали 
артиллерийских лошадей и поворачивали пушки. 
Князь Андрей с батальоном уже был в двадцати шагах от орудий. 
Он слышал над собою неперестававший свист пуль, и 
беспрестанно справа и слева от него охали и падали солдаты. 
Но он не смотрел на них; он вглядывался только в то, 
что происходило впереди его - на батарее. Он ясно видел уже одну 
фигуру рыжего артиллериста с сбитым набок кивером, тянущего 
с одной стороны банник, тогда как французский солдат тянул банник к 
себе за другую сторону. Князь Андрей видел уже ясно растерянное и 
вместе озлобленное выражение лиц этих двух людей, видимо, не 
понимавших того, что они делали';

$words = preg_split("/[!\.\s,;-]+/", $in);
$out = [];
$count = 0;
foreach($words as $word){
    isset($out[$word])?$out[$word]++:$out[$word]=1;
    $count++;
}

arsort($out);

foreach($out as $wcount => $value) {
    echo $wcount, '.', $out[$wcount], "\n", "<br />";
}

echo 'Всего слов: ', $count;
?>
